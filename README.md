# Time Series Imputation and Forecasting Experiment

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ—¨åœ¨è¯„ä¼°åŸºäºç¼ºå¤±æ¨¡å¼è¯†åˆ«çš„å¡«è¡¥ç­–ç•¥åœ¨å¤šæ•°æ®é›†ã€å¤šç¼ºå¤±åœºæ™¯ä¸‹çš„æ€§èƒ½ï¼Œå¯¹æ¯”å¡«è¡¥è´¨é‡ã€ä¸‹æ¸¸é¢„æµ‹æ€§èƒ½ã€è®¡ç®—å¼€é”€ä¸ç¨³å®šæ€§ã€‚

## ğŸ¯ å®éªŒè®¾è®¡

### ä¸‰æ¡å®éªŒè·¯å¾„ï¼š
- **Path A (Baseline)**: ä½¿ç”¨ç»Ÿä¸€çš„å¡«è¡¥æ–¹æ³•ï¼Œå°†å¡«è¡¥åçš„æ•°æ®ä¼ ç»™ä¸‹æ¸¸æ¨¡å‹
- **Path B (Pattern-Aware)**: æ ¹æ®ç¼ºå¤±æ¨¡å¼é€‰æ‹©å¯¹åº”çš„å¡«è¡¥ç­–ç•¥

### ç¼ºå¤±æ¨¡å¼ï¼š
- MCAR: å®Œå…¨éšæœºç¼ºå¤±
- MAR-STRUCT: ç¼ºå¤±æ¦‚ç‡ä¾èµ–äºå…¶ä»–å˜é‡  
- MNAR-BIAS: ç¼ºå¤±ä¾èµ–äºè‡ªèº«æœªè§‚æµ‹å€¼
- BLACKOUT: è¿ç»­åŒºæ®µç¼ºå¤±

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
Time_Series_Lib/
â”œâ”€â”€ run_imputation.py          # å¡«è¡¥å®éªŒä¸»è„šæœ¬
â”œâ”€â”€ run_forecast.py            # é¢„æµ‹å®éªŒä¸»è„šæœ¬
â”œâ”€â”€ run_analysis.py            # åˆ†ææ±‡æ€»è„šæœ¬
â”œâ”€â”€ environment.yml
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ config.yaml           # å®éªŒé…ç½®æ–‡ä»¶
â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°åŒ…
â”‚   â”œâ”€â”€ data_loader.py        # æ•°æ®åŠ è½½
â”‚   â”œâ”€â”€ evaluator.py          # æŒ‡æ ‡è®¡ç®—
â”‚   â”œâ”€â”€ logger.py             # å®éªŒæ—¥å¿—
â”‚   â””â”€â”€ visualizer.py         # å¯è§†åŒ–
â”œâ”€â”€ imputer/                  # å¡«è¡¥æ–¹æ³•åŒ…
â”‚   â”œâ”€â”€ mean_imputer.py
â”‚   â”œâ”€â”€ knn_imputer.py
â”‚   â”œâ”€â”€ miss_forest_imputer.py
â”‚   â”œâ”€â”€ trmf_imputer.py
â”‚   â”œâ”€â”€ xgboost_imputer.py
â”‚   â”œâ”€â”€ iim_imputer.py
â”‚   â””â”€â”€ front_imputer.py
â”œâ”€â”€ statistical_models/     #ç»Ÿè®¡é¢„æµ‹æ¨¡å‹
|   â”œâ”€â”€ __init__.py 
|   â”œâ”€â”€ base_forecaster.py
â”‚   â”œâ”€â”€ arima.py
â”‚   â”œâ”€â”€ auto_arima.py
â”‚   â”œâ”€â”€ sarima.py
â”‚   â””â”€â”€ auto_sarima.py
â”œâ”€â”€ dataset/                  # æ•°æ®é›†
â”‚   â”œâ”€â”€ raw/                 # åŸå§‹æ•°æ®
â”‚   â””â”€â”€ data_with_missing/   # æ³¨å…¥ç¼ºå¤±çš„æ•°æ®
â”œâ”€â”€ impute_outputs/          # å¡«è¡¥ç»“æœ
â”œâ”€â”€ forecast_outputs/        # é¢„æµ‹ç»“æœ
â””â”€â”€ results/                 # åˆ†æç»“æœ
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda env create -f environment.yml -n timeseries_exp
conda activate timeseries_exp



### 2. è¿è¡Œå•ä¸ªå®éªŒ

```bash
# å¡«è¡¥å®éªŒ
python run_imputation.py --dataset electricity --pattern MCAR --rate 0.1 --imputer mean

# é¢„æµ‹å®éªŒ
python run_forecast.py --dataset electricity --pattern MCAR --rate 0.1 --imputer mean --model arima

# åˆ†æç»“æœ
python run_analysis.py
```

### 3. æ‰¹é‡è¿è¡Œæ‰€æœ‰ç»„åˆ

```bash
# è¿è¡Œæ‰€æœ‰å¡«è¡¥ç»„åˆ
python run_imputation.py --all

# è¿è¡Œæ‰€æœ‰é¢„æµ‹ç»„åˆ
python run_forecast.py --all

# ç”Ÿæˆç»¼åˆåˆ†ææŠ¥å‘Š
python run_analysis.py
```

## âš™ï¸ é…ç½®è¯´æ˜

### æ•°æ®é›†é…ç½®
ç”¨æˆ·å¯æ ¹æ®é¡¹ç›®æ¶æ„ï¼Œåˆ›å»ºè‡ªå·±çš„æ•°æ®é›†
é»˜è®¤æ”¯æŒçš„æ•°æ®é›†ï¼š`electricity`, `ETTh1`, `ETTh2`, `ETTm1`, `ETTm2`, `exchange_rate`, `national_illness`, `traffic`, `weather`
ç”¨æˆ·å¯è‡ªå®šä¹‰ï¼ˆåœ¨config.yamlä¸­è‡ªå®šä¹‰ï¼‰

### å¡«è¡¥æ–¹æ³•
- `mean`: å‡å€¼å¡«è¡¥
- `knn`: Kè¿‘é‚»å¡«è¡¥
- `miss_forest`: éšæœºæ£®æ—å¡«è¡¥
- `trmf`: æ—¶åºæ­£åˆ™åŒ–çŸ©é˜µåˆ†è§£
- `xgboost`: XGBoostå¡«è¡¥
- `iim`: è¿­ä»£æ’è¡¥æ–¹æ³•
- `front`: å‰å‘å¡«å……

### é¢„æµ‹æ¨¡å‹
- `arima`: ARIMAæ¨¡å‹
- `auto_arima`: è‡ªåŠ¨ARIMA
- `sarima`: å­£èŠ‚æ€§ARIMA
- `auto_sarima`: è‡ªåŠ¨å­£èŠ‚æ€§ARIMA

## ğŸ“Š è¯„ä¼°æŒ‡æ ‡

### å¡«è¡¥è´¨é‡
- RMSE, MAE, Bias, RÂ²

### é¢„æµ‹æ€§èƒ½  
- RMSE, MAE, MAPE, Skill Score

### è®¡ç®—æˆæœ¬
- æ—¶é—´å¼€é”€, å†…å­˜ä½¿ç”¨

### é²æ£’æ€§
- ç§å­æ–¹å·®, ç¼ºå¤±ç‡æ•æ„Ÿåº¦

## ğŸ”§ è‡ªå®šä¹‰å®éªŒ

### ä¿®æ”¹é…ç½®æ–‡ä»¶
ç¼–è¾‘ `config/config.yaml` æ¥è°ƒæ•´ï¼š
- å®éªŒå‚æ•°ï¼ˆéšæœºç§å­ã€æµ‹è¯•é›†æ¯”ä¾‹ç­‰ï¼‰
- ç¼ºå¤±æ¨¡å¼æ˜ å°„è§„åˆ™
- æŒ‡æ ‡æƒé‡è®¾ç½®

### æ·»åŠ æ–°çš„å¡«è¡¥æ–¹æ³•
1. åœ¨ `imputer/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„å¡«è¡¥å™¨
2. ç¡®ä¿ç»Ÿä¸€çš„è¾“å…¥è¾“å‡ºæ¥å£ï¼ˆnumpy arrayï¼‰
3. åœ¨ `config.yaml` ä¸­æ·»åŠ é…ç½®

### æ·»åŠ æ–°çš„é¢„æµ‹æ¨¡å‹
1. åœ¨ `statistical_models/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ¨¡å‹
2. åœ¨ `config.yaml` ä¸­æ³¨å†Œæ¨¡å‹

## ğŸ“ˆ ç»“æœè¾“å‡º

å®éªŒç»“æœå°†ä¿å­˜åœ¨ä¸‰ä¸ªç›®å½•ï¼š
- `impute_outputs/`: å¡«è¡¥ç»“æœå’ŒæŒ‡æ ‡
- `forecast_outputs/`: é¢„æµ‹ç»“æœå’ŒæŒ‡æ ‡  
- `results/`: ç»¼åˆåˆ†æå›¾è¡¨å’ŒæŠ¥å‘Š

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **åŒ…å®‰è£…å¤±è´¥**: å°è¯•ä½¿ç”¨condaå®‰è£…åŸºç¡€åŒ…ï¼Œpipå®‰è£…å…¶ä»–
2. **å†…å­˜ä¸è¶³**: å‡å°‘åŒæ—¶è¿è¡Œçš„å®éªŒæ•°é‡
3. **æ—¶é—´æˆ³è¯†åˆ«é”™è¯¯**: ç¡®ä¿æ•°æ®ç¬¬ä¸€åˆ—ä¸ºæœ‰æ•ˆæ—¶é—´æˆ³æ ¼å¼

### è·å–å¸®åŠ©
å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
- è™šæ‹Ÿç¯å¢ƒæ˜¯å¦æ­£ç¡®æ¿€æ´»
- æ‰€æœ‰ä¾èµ–åŒ…æ˜¯å¦å®‰è£…æˆåŠŸ
- æ•°æ®æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®


## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›æœ¬é¡¹ç›®ã€‚